graph TD;

%% External Entities
A[Patient] -->|Login & Request Medical Data| B[Frontend Web Application]
C[Doctor] -->|Access Patient Records & Approve Requests| B
D[Third-Party Services] -->|API Calls (Billing, Insurance)| F[Backend API]
X[Attacker] -->|Attempt Credential Theft| B

%% Internal Components
B -->|Authenticate User Requests| E[Authentication Server]
B -->|Schedule Appointments| F
F -->|Process Patient Data| G[Medical Database]
E -->|Verify Credentials| G
F -->|Billing Operations| H[Payment Gateway]
G -->|Securely Store Medical Records| J[Cloud Storage]
H -->|Process Payments| K[Banking System]
Y[Attacker] -->|Try API Exploitation| F

%% STRIDE Threats & Risk Indicators
style X fill:#FFAAAA,stroke:#000000,stroke-width:2px
style Y fill:#FFAAAA,stroke:#000000,stroke-width:2px
style B fill:#FFC857,stroke:#000000,stroke-width:2px
style F fill:#D4A5A5,stroke:#000000,stroke-width:2px
style G fill:#74B49B,stroke:#000000,stroke-width:2px
style H fill:#99CCFF,stroke:#000000,stroke-width:2px
style J fill:#E6E6FA,stroke:#000000,stroke-width:2px

%% Labels for STRIDE Threats
F -.->|Tampering Threat| G
B -.->|Spoofing Attempt| E
G -.->|Information Disclosure| J
H -.->|Repudiation Risk| K
X -.->|Attempted Credential Theft (Spoofing)| B
Y -.->|API Injection Attempt| F